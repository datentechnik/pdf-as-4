apply plugin: 'java-library'
apply plugin: 'eclipse'
apply plugin: 'java-library-distribution'

jar {
	manifest {
		attributes 'Implementation-Title': 'PDF-AS-4 Legacy Library'
	}
}

repositories {
	mavenLocal()
	mavenCentral()
	maven { url "http://nexus.iaik.tugraz.at/nexus/content/groups/internal" }
}

dependencies {
	implementation project (':pdf-as-lib')
	implementation project (':pdf-as-moa')
	implementation project (':signature-standards:sigs-pkcs7detached')
	implementation project (':signature-standards:sigs-pades')
	implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.12.0'
	implementation group: 'commons-codec', name: 'commons-codec', version: '1.15'
	testImplementation group: 'junit', name: 'junit', version: '4.+'
}

task releases(type: Copy) {
	from jar.outputs
	into rootDir.toString() + "/releases/" + version
}

releases.dependsOn jar
releases.dependsOn sourcesJar

/*javadoc {
	appName = 'PDF-AS-4 Legacy Library'
	exclude = '/**'
	include = 'at/gv/egiz/pdfas/**'
	project.configure(options) {
		memberLevel = org.gradle.external.javadoc.JavadocMemberLevel.PROTECTED
		charSet = "ISO-8859-1"
		docTitle = "$appName"
		windowTitle = "$appName"
		header = "<b>$appName</b>"
		use = "true"
		links("http://java.sun.com/j2ee/1.4/docs/api", "http://java.sun.com/j2se/1.5.0/docs/api")
	}
}*/

test { systemProperties 'property': 'value' }

distributions {
    main {
        contents {
            from { '../docs' }
            from('../doc/') {
               include '*.pdf'
            } 
        }
    }
}
